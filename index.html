<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- Мета-теги и заголовок -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ЖерБулагы - Геотермальная энергия</title>
  
  <!-- Favicon -->
  <link rel="icon" href="https://i.imgur.com/zD3oX2x.png">
  
  <!-- Внешние ресурсы -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
  <!-- Локальный файл стилей -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Хедер -->
  <header>
    <div class="header-container">
      <div class="logo">
        <div class="logo-icon"></div>
        <div class="logo-text">
          <h1>ЖерБулагы</h1>
          <p>Геотермальная энергия будущего</p>
        </div>
      </div>
      <!-- Бургер-меню для мобильных -->
      <button class="burger-menu" onclick="toggleMenu()">☰</button>
      <nav>
        <ul class="nav-menu">
          <li class="nav-item"><a href="#about" class="nav-link">Главная</a></li>
          <li class="nav-item"><a href="#benefits" class="nav-link">Преимущества</a></li>
          <li class="nav-item"><a href="#education" class="nav-link">Обучение</a></li>
          <li class="nav-item"><a href="#map" class="nav-link">Карта</a></li>
          <li class="nav-item"><a href="#calculator" class="nav-link">Калькулятор</a></li>
          <li class="nav-item"><a href="#invest" class="nav-link">Инвесторам</a></li>
          <li class="nav-item"><a href="#register" class="nav-link">Регистрация</a></li>
          <li class="nav-item"><a href="#account" class="nav-link">Вход</a></li>
          <li class="nav-item"><a href="#profile" id="profileLink" class="nav-link hidden">Профиль</a></li>
          <li class="nav-item"><a href="#" onclick="logout()" id="logoutBtn" class="nav-link hidden">Выйти</a></li>
        </ul>
        <div class="language-switcher">
          <a href="index.html" class="lang-btn active">RU</a>
          <a href="index-en.html" class="lang-btn">EN</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Основной контент -->
  <main>
    <!-- Секция "О проекте" -->
    <section id="about">
      <h2 class="section-title animate__animated animate__fadeIn">О проекте ЖерБулагы</h2>
      <div class="card">
        <p>ЖерБулагы — это проект, направленный на популяризацию геотермальной энергии в Кыргызстане. Мы стремимся сделать экологически чистое отопление доступным для каждого дома, снизить выбросы CO₂ и сократить расходы на энергию.</p>
      </div>
      <div class="mt-4" style="text-align: center;">
        <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba" alt="Геотермальный источник в Кыргызстане" style="max-width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
      </div>
    </section>

    <!-- Секция "Преимущества" -->
    <section id="benefits">
      <h2 class="section-title animate__animated animate__fadeIn">Преимущества геотермальной энергии</h2>
      <div class="animate-on-scroll">
        <div class="card">
          <h3>Экологичность</h3>
          <p>Геотермальная энергия снижает выбросы углерода на 80% по сравнению с традиционными источниками.</p>
        </div>
        <div class="card">
          <h3>Экономия</h3>
          <p>Экономьте до 50% на отоплении и горячем водоснабжении ежегодно.</p>
        </div>
        <div class="card">
          <h3>Надежность</h3>
          <p>Геотермальные системы работают стабильно в любое время года.</p>
        </div>
      </div>
      <div class="mt-4" style="text-align: center;">
        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e" alt="Преимущества возобновляемой энергии" style="max-width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
      </div>
    </section>

    <!-- Секция "Обучение" -->
    <section id="education">
      <h2 class="section-title animate__animated animate__fadeIn">Обучение</h2>
      <div class="animate-on-scroll">
        <div class="card">
          <h3>Курс для домовладельцев</h3>
          <p>Узнайте, как установить геотермальную систему в вашем доме.</p>
          <button class="btn btn-primary mt-2" onclick="openCourse('Курс для домовладельцев')">Записаться</button>
        </div>
        <div class="card">
          <h3>Курс для инженеров</h3>
          <p>Освойте проектирование и обслуживание геотермальных систем.</p>
          <button class="btn btn-primary mt-2" onclick="openCourse('Курс для инженеров')">Записаться</button>
        </div>
      </div>
    </section>

    <!-- Секция "Карта" -->
    <section id="map">
      <h2 class="section-title animate__animated animate__fadeIn">Карта геотермальных источников</h2>
      <div class="form-container mt-4">
        <label for="regionSelect">Выберите регион:</label>
        <select id="regionSelect" class="form-control">
          <option value="Kyrgyzstan">Кыргызстан</option>
          <option value="Issyk-Kul">Иссык-Куль</option>
          <option value="Ak-Suu">Ак-Суу</option>
          <option value="Jeti-Oguz">Джети-Огуз</option>
          <option value="Jyrgalang">Джыргалан</option>
          <option value="Barbulak">Барбулак</option>
          <option value="Cholpon-Ata">Чолпон-Ата</option>
          <option value="Kosh-Kol">Кош-Кол</option>
        </select>
      </div>
      <div id="geoMap" class="map-container mt-4"></div>
    </section>

    <!-- Секция "Калькулятор" -->
    <section id="calculator">
      <h2 class="section-title animate__animated animate__fadeIn">Калькулятор экономии</h2>
      <div class="form-container">
        <div class="form-group">
          <label for="area">Площадь дома (м²):</label>
          <input type="number" id="area" class="form-control" placeholder="Введите площадь">
        </div>
        <div class="form-group">
          <label for="source">Текущий источник энергии:</label>
          <select id="source" class="form-control">
            <option value="coal">Уголь</option>
            <option value="wood">Дрова</option>
            <option value="electricity">Электричество</option>
            <option value="gas">Природный газ</option>
          </select>
        </div>
        <div class="form-group">
          <label for="region">Регион:</label>
          <select id="region" class="form-control">
            <option value="General">Общая оценка</option>
            <option value="Bishkek">Бишкек</option>
            <option value="Issyk-Kul">Иссык-Куль</option>
            <option value="Chuy">Чуй</option>
            <option value="Naryn">Нарын</option>
            <option value="Osh">Ош</option>
          </select>
        </div>
        <button class="btn btn-primary mt-2" onclick="calculate()">Рассчитать</button>
      </div>
      <div id="result" class="result hidden"></div>
    </section>

    <!-- Секция "Инвесторам" -->
    <section id="invest">
      <h2 class="section-title animate__animated animate__fadeIn">Инвесторам и партнерам</h2>
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab('investors')">Инвесторы</button>
        <button class="tab-btn" onclick="openTab('government')">Гос. программы</button>
        <button class="tab-btn" onclick="openTab('monetization')">Монетизация</button>
      </div>
      <div id="investors" class="tab-content active">
        <p>Инвесторы, заинтересованные в геотермальных проектах:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Green Energy Fund</h3>
            <p>Инвестиционный фонд, специализирующийся на возобновляемой энергетике. Готовы рассмотреть проекты от $25,000 до $500,000.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Green Energy Fund')">Связаться</button>
          </li>
        </ul>
      </div>
      <div id="government" class="tab-content">
        <p>Государственные программы поддержки возобновляемой энергетики:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Программа "Зеленая энергия"</h3>
            <p>Субсидии до 30% стоимости оборудования для геотермальных установок в частных домах.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Программа Зеленая энергия')">Подробнее</button>
          </li>
          <li class="project-item">
            <h3 class="project-title">Гранты для стартапов</h3>
            <p>Конкурс на лучший проект в области возобновляемой энергетики с призовым фондом до $20,000.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Гранты для стартапов')">Подробнее</button>
          </li>
        </ul>
      </div>
      <div id="monetization" class="tab-content">
        <p>Как ЖерБулагы зарабатывает:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Платные образовательные курсы</h3>
            <p>Платные курсы по геотермальной энергии для домовладельцев и профессионалов (500–2500 сом за курс).</p>
          </li>
          <li class="project-item">
            <h3 class="project-title">Консультационные услуги</h3>
            <p>Консультации для бизнеса и домохозяйств по установке геотермальных систем (от 5000 сом).</p>
          </li>
          <li class="project-item">
            <h3 class="project-title">Рекламные партнерства</h3>
            <p>Сотрудничество с компаниями в сфере возобновляемой энергетики для рекламы на платформе.</p>
          </li>
        </ul>
      </div>
    </section>

    <!-- Секция "Регистрация" -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
      // Инициализация карты
      var map = L.map('map', {
        maxBounds: L.latLngBounds(
          L.latLng(39.0, 69.0), // Юго-западный угол (мин. широта, мин. долгота)
          L.latLng(43.0, 80.0)  // Северо-восточный угол (макс. широта, макс. долгота)
        ),
        maxBoundsViscosity: 1.0 // Жёсткое ограничение области
      }).setView([41.2044, 74.7661], 6); // Центр Кыргызстана, зум 6
    
      // Базовая карта (OpenStreetMap)
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 10,
        minZoom: 5
      }).addTo(map);
    
      // Данные о геотермальных источниках
      var sources = [
        { name: 'Jeti-Oguz', nameRu: 'Джети-Огуз', coords: [42.330556, 78.239722], temp: '39–40 °C', depth: 'до 200 м', activity: 'средняя', saving: 350, potential: 'Для отопления домов и теплиц' },
        { name: 'Jyrgalang', nameRu: 'Джыргалан', coords: [42.600000, 79.030000], temp: '35–43 °C', depth: 'до 200 м', activity: 'средняя', saving: 300, potential: 'Курортное использование' },
        { name: 'Ak-Suu', nameRu: 'Ак-Суу', coords: [42.461981, 78.539749], temp: '58 °C', depth: 'до 150 м', activity: 'высокая', saving: 500, potential: 'Промышленное использование' },
        { name: 'Barbulak', nameRu: 'Барбулак', coords: [42.247204, 76.579165], temp: '39–42 °C', depth: 'до 180 м', activity: 'средняя', saving: 320, potential: 'Локальное отопление' },
        { name: 'Cholpon-Ata', nameRu: 'Чолпон-Ата', coords: [42.650000, 77.083000], temp: '35–53 °C', depth: '200–800 м', activity: 'высокая', saving: 400, potential: 'Курортное и муниципальное использование' },
        { name: 'Kosh-Kol', nameRu: 'Кош-Кол', coords: [42.530000, 76.610000], temp: '39–42 °C', depth: 'до 200 м', activity: 'средняя', saving: 300, potential: 'Локальное отопление' },
        { name: 'Bishkek (Alamedin)', nameRu: 'Бишкек (Аламедин)', coords: [42.8746, 74.5698], temp: '70°C', depth: '2000m', activity: 'высокая', saving: 700, potential: 'Очень высокий' },
        { name: 'Altyn-Arashan', nameRu: 'Алтын-Арашан', coords: [42.8200, 75.3000], temp: '60°C', depth: '1700m', activity: 'высокая', saving: 550, potential: 'Высокий' },
        { name: 'Osh', nameRu: 'Ош', coords: [40.5300, 72.8000], temp: '35°C', depth: '800m', activity: 'низкая', saving: 250, potential: 'Низкий' },
        { name: 'Aravan', nameRu: 'Араван', coords: [40.7000, 72.6000], temp: '45°C', depth: '1100m', activity: 'средняя', saving: 350, potential: 'Средний' },
        { name: 'Alai (Kashka-Suu)', nameRu: 'Алай (Кашка-Суу)', coords: [39.5000, 72.0000], temp: '50°C', depth: '1300m', activity: 'средняя', saving: 400, potential: 'Средний' },
        { name: 'Naryn', nameRu: 'Нарын', coords: [41.4300, 76.0000], temp: '30°C', depth: '2000m', activity: 'низкая', saving: 200, potential: 'Низкий' },
        { name: 'Ala-Buka', nameRu: 'Ала-Бука', coords: [41.0000, 72.9000], temp: '55°C', depth: '1500m', activity: 'высокая', saving: 450, potential: 'Высокий' },
        { name: 'Tash-Kumyr', nameRu: 'Таш-Кумыр', coords: [41.2000, 72.5000], temp: '40°C', depth: '1000m', activity: 'низкая', saving: 300, potential: 'Низкий' },
      ];
    
      // Функция для создания иконок с цветом
      function getMarkerIcon(activity) {
        let color;
        switch (activity.toLowerCase()) {
          case 'высокая':
          case 'high':
            color = '#28a745'; // Зелёный
            break;
          case 'средняя':
          case 'medium':
            color = '#ffc107'; // Жёлтый
            break;
          case 'низкая':
          case 'low':
            color = '#dc3545'; // Красный
            break;
          default:
            color = '#3388ff'; // Синий по умолчанию
        }
        return new L.Icon({
          iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${color.replace('#', '')}.png`,
          shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
          iconSize: [25, 41],
          iconAnchor: [12, 41],
          popupAnchor: [1, -34],
          shadowSize: [41, 41]
        });
      }
    
      // Добавление маркеров с цветами
      sources.forEach(source => {
        var isEnglish = window.location.pathname.includes('index-en.html');
        var markerIcon = getMarkerIcon(source.activity);
        var marker = L.marker(source.coords, { icon: markerIcon }).addTo(map);
        var popupContent = isEnglish
          ? `<b>${source.name}</b><br>Temperature: ${source.temp}<br>Depth: ${source.depth}<br>Activity: ${source.activity}<br>Savings: $${source.saving}/year<br>Potential: ${source.potential}`
          : `<b>${source.nameRu}</b><br>Температура: ${source.temp}<br>Глубина: ${source.depth}<br>Активность: ${source.activity}<br>Экономия: $${source.saving}/год<br>Потенциал: ${source.potential}`;
        marker.bindPopup(popupContent);
      });
    
      // Регистрация и вход (оставляем без изменений)
      function handleRegister(event) {
        event.preventDefault();
        const name = document.getElementById("regName").value;
        const pass = document.getElementById("regPass").value;
        const email = document.getElementById("regEmail").value;
    
        if (pass.length < 6) {
          alert("Пароль должен содержать не менее 6 символов");
          return false;
        }
    
        localStorage.setItem("username", name);
        localStorage.setItem("password", pass);
        localStorage.setItem("email", email);
    
        alert("Вы успешно зарегистрировались! Теперь вы можете войти.");
        window.location.href = "#account";
        return false;
      }
    
      function handleLogin(event) {
        event.preventDefault();
        const name = document.getElementById("loginName").value;
        const pass = document.getElementById("loginPass").value;
        const savedName = localStorage.getItem("username");
        const savedPass = localStorage.getItem("password");
        const savedEmail = localStorage.getItem("email");
    
        if ((name === savedName || name === savedEmail) && pass === savedPass) {
          document.getElementById("account").classList.add("hidden");
          document.getElementById("profile").classList.remove("hidden");
          document.getElementById("profileLink").classList.remove("hidden");
          document.getElementById("logoutBtn").classList.remove("hidden");
    
          document.getElementById("welcomeText").textContent = `Добро пожаловать, ${savedName}!`;
          document.getElementById("profileUsername").textContent = savedName;
          document.getElementById("profileEmail").textContent = savedEmail;
    
          document.querySelectorAll('.nav-link').forEach(link => {
            if (link.getAttribute('href') === '#register' || link.getAttribute('href') === '#account') {
              link.classList.add('hidden');
            }
          });
    
          window.location.href = "#profile";
        } else {
          alert("Неверное имя пользователя или пароль");
        }
        return false;
      }
    
      function logout() {
        document.getElementById("profile").classList.add("hidden");
        document.getElementById("profileLink").classList.add("hidden");
        document.getElementById("logoutBtn").classList.add("hidden");
    
        document.querySelectorAll('.nav-link').forEach(link => {
          if (link.getAttribute('href') === '#register' || link.getAttribute('href') === '#account') {
            link.classList.remove('hidden');
          }
        });
    
        window.location.href = "#about";
      }
    
      // Плавная прокрутка
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth'
            });
          }
        });
      });
    
      // Анимация при скролле
      function checkScroll() {
        const elements = document.querySelectorAll('.animate-on-scroll');
        elements.forEach(el => {
          const rect = el.getBoundingClientRect();
          if (rect.top < window.innerHeight - 100) {
            el.classList.add('visible');
          }
        });
      }
    
      window.addEventListener('scroll', checkScroll);
      checkScroll();
    </script>
    <script src="chatbot.js"></script>
</body>
<script src="chatbot.js"></script>
<!-- Чат-бот -->
<div class="chatbot-container" id="chatbot">
  <div class="chatbot-header">
    <h3>ЖерБулагы Чат-бот</h3>
    <button class="chatbot-close" onclick="toggleChatbot()">✕</button>
  </div>
  <div class="chatbot-messages" id="chatbotMessages">
    <div class="message bot-message">Привет! Я помогу выбрать геотермальное решение. В каком регионе ты находишься?</div>
  </div>
  <div class="chatbot-input">
    <input type="text" id="chatbotInput" placeholder="Введите ответ..." onkeypress="if(event.key === 'Enter') sendMessage()">
    <button onclick="sendMessage()">➤</button>
  </div>
</div>
<button class="chatbot-toggle" onclick="toggleChatbot()">💬</button>

</html>