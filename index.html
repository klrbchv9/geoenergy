<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- Мета-теги и заголовок -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ЖерБулагы - Геотермальная энергия</title>
  
  <!-- Favicon -->
  <link rel="icon" href="https://i.imgur.com/zD3oX2x.png">
  
  <!-- Внешние ресурсы -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
  <!-- Локальный файл стилей -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Хедер -->
  <header>
    <div class="header-container">
      <div class="logo">
        <div class="logo-icon"></div>
        <div class="logo-text">
          <h1>ЖерБулагы</h1>
          <p>Геотермальная энергия будущего</p>
        </div>
      </div>
      <!-- Бургер-меню для мобильных -->
      <button class="burger-menu" onclick="toggleMenu()">☰</button>
      <nav>
        <ul class="nav-menu">
          <li class="nav-item"><a href="#about" class="nav-link">Главная</a></li>
          <li class="nav-item"><a href="#benefits" class="nav-link">Преимущества</a></li>
          <li class="nav-item"><a href="#education" class="nav-link">Обучение</a></li>
          <li class="nav-item"><a href="#map" class="nav-link">Карта</a></li>
          <li class="nav-item"><a href="#calculator" class="nav-link">Калькулятор</a></li>
          <li class="nav-item"><a href="#invest" class="nav-link">Инвесторам</a></li>
          <li class="nav-item"><a href="#register" class="nav-link">Регистрация</a></li>
          <li class="nav-item"><a href="#account" class="nav-link">Вход</a></li>
          <li class="nav-item"><a href="#profile" id="profileLink" class="nav-link hidden">Профиль</a></li>
          <li class="nav-item"><a href="#" onclick="logout()" id="logoutBtn" class="nav-link hidden">Выйти</a></li>
        </ul>
        <div class="language-switcher">
          <a href="index.html" class="lang-btn active">RU</a>
          <a href="index-en.html" class="lang-btn">EN</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Основной контент -->
  <main>
    <!-- Секция "О проекте" -->
    <section id="about">
      <h2 class="section-title animate__animated animate__fadeIn">О проекте ЖерБулагы</h2>
      <div class="card">
        <p>ЖерБулагы — это проект, направленный на популяризацию геотермальной энергии в Кыргызстане. Мы стремимся сделать экологически чистое отопление доступным для каждого дома, снизить выбросы CO₂ и сократить расходы на энергию.</p>
      </div>
      <div class="mt-4" style="text-align: center;">
        <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba" alt="Геотермальный источник в Кыргызстане" style="max-width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
      </div>
    </section>

    <!-- Секция "Преимущества" -->
    <section id="benefits">
      <h2 class="section-title animate__animated animate__fadeIn">Преимущества геотермальной энергии</h2>
      <div class="animate-on-scroll">
        <div class="card">
          <h3>Экологичность</h3>
          <p>Геотермальная энергия снижает выбросы углерода на 80% по сравнению с традиционными источниками.</p>
        </div>
        <div class="card">
          <h3>Экономия</h3>
          <p>Экономьте до 50% на отоплении и горячем водоснабжении ежегодно.</p>
        </div>
        <div class="card">
          <h3>Надежность</h3>
          <p>Геотермальные системы работают стабильно в любое время года.</p>
        </div>
      </div>
      <div class="mt-4" style="text-align: center;">
        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e" alt="Преимущества возобновляемой энергии" style="max-width: 100%; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
      </div>
    </section>

    <!-- Секция "Обучение" -->
    <section id="education">
      <h2 class="section-title animate__animated animate__fadeIn">Обучение</h2>
      <div class="animate-on-scroll">
        <div class="card">
          <h3>Курс для домовладельцев</h3>
          <p>Узнайте, как установить геотермальную систему в вашем доме.</p>
          <button class="btn btn-primary mt-2" onclick="openCourse('Курс для домовладельцев')">Записаться</button>
        </div>
        <div class="card">
          <h3>Курс для инженеров</h3>
          <p>Освойте проектирование и обслуживание геотермальных систем.</p>
          <button class="btn btn-primary mt-2" onclick="openCourse('Курс для инженеров')">Записаться</button>
        </div>
      </div>
    </section>

    <!-- Секция "Карта" -->
    <section id="map">
      <h2 class="section-title animate__animated animate__fadeIn">Карта геотермальных источников</h2>
      <div class="form-container mt-4">
        <label for="regionSelect">Выберите регион:</label>
        <select id="regionSelect" class="form-control">
          <option value="Kyrgyzstan">Кыргызстан</option>
          <option value="Issyk-Kul">Иссык-Куль</option>
          <option value="Ak-Suu">Ак-Суу</option>
          <option value="Jeti-Oguz">Джети-Огуз</option>
          <option value="Jyrgalang">Джыргалан</option>
          <option value="Barbulak">Барбулак</option>
          <option value="Cholpon-Ata">Чолпон-Ата</option>
          <option value="Kosh-Kol">Кош-Кол</option>
        </select>
      </div>
      <div id="geoMap" class="map-container mt-4"></div>
    </section>

    <!-- Секция "Калькулятор" -->
    <section id="calculator">
      <h2 class="section-title animate__animated animate__fadeIn">Калькулятор экономии</h2>
      <div class="form-container">
        <div class="form-group">
          <label for="area">Площадь дома (м²):</label>
          <input type="number" id="area" class="form-control" placeholder="Введите площадь">
        </div>
        <div class="form-group">
          <label for="source">Текущий источник энергии:</label>
          <select id="source" class="form-control">
            <option value="coal">Уголь</option>
            <option value="wood">Дрова</option>
            <option value="electricity">Электричество</option>
            <option value="gas">Природный газ</option>
          </select>
        </div>
        <div class="form-group">
          <label for="region">Регион:</label>
          <select id="region" class="form-control">
            <option value="General">Общая оценка</option>
            <option value="Bishkek">Бишкек</option>
            <option value="Issyk-Kul">Иссык-Куль</option>
            <option value="Chuy">Чуй</option>
            <option value="Naryn">Нарын</option>
            <option value="Osh">Ош</option>
          </select>
        </div>
        <button class="btn btn-primary mt-2" onclick="calculate()">Рассчитать</button>
      </div>
      <div id="result" class="result hidden"></div>
    </section>

    <!-- Секция "Инвесторам" -->
    <section id="invest">
      <h2 class="section-title animate__animated animate__fadeIn">Инвесторам и партнерам</h2>
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab('investors')">Инвесторы</button>
        <button class="tab-btn" onclick="openTab('government')">Гос. программы</button>
        <button class="tab-btn" onclick="openTab('monetization')">Монетизация</button>
      </div>
      <div id="investors" class="tab-content active">
        <p>Инвесторы, заинтересованные в геотермальных проектах:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Green Energy Fund</h3>
            <p>Инвестиционный фонд, специализирующийся на возобновляемой энергетике. Готовы рассмотреть проекты от $25,000 до $500,000.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Green Energy Fund')">Связаться</button>
          </li>
        </ul>
      </div>
      <div id="government" class="tab-content">
        <p>Государственные программы поддержки возобновляемой энергетики:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Программа "Зеленая энергия"</h3>
            <p>Субсидии до 30% стоимости оборудования для геотермальных установок в частных домах.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Программа Зеленая энергия')">Подробнее</button>
          </li>
          <li class="project-item">
            <h3 class="project-title">Гранты для стартапов</h3>
            <p>Конкурс на лучший проект в области возобновляемой энергетики с призовым фондом до $20,000.</p>
            <button class="btn btn-outline mt-2" onclick="contactProject('Гранты для стартапов')">Подробнее</button>
          </li>
        </ul>
      </div>
      <div id="monetization" class="tab-content">
        <p>Как ЖерБулагы зарабатывает:</p>
        <ul class="project-list mt-2">
          <li class="project-item">
            <h3 class="project-title">Платные образовательные курсы</h3>
            <p>Платные курсы по геотермальной энергии для домовладельцев и профессионалов (500–2500 сом за курс).</p>
          </li>
          <li class="project-item">
            <h3 class="project-title">Консультационные услуги</h3>
            <p>Консультации для бизнеса и домохозяйств по установке геотермальных систем (от 5000 сом).</p>
          </li>
          <li class="project-item">
            <h3 class="project-title">Рекламные партнерства</h3>
            <p>Сотрудничество с компаниями в сфере возобновляемой энергетики для рекламы на платформе.</p>
          </li>
        </ul>
      </div>
    </section>

    <!-- Секция "Регистрация" -->
    <section id="register">
      <h2 class="section-title animate__animated animate__fadeIn">Регистрация</h2>
      <form class="form-container" onsubmit="return handleRegister(event)">
        <div class="form-group">
          <label for="regName">Имя:</label>
          <input type="text" id="regName" class="form-control" placeholder="Введите ваше имя" required>
        </div>
        <div class="form-group">
          <label for="regEmail">Email:</label>
          <input type="email" id="regEmail" class="form-control" placeholder="Введите ваш email" required>
        </div>
        <div class="form-group">
          <label for="regPass">Пароль:</label>
          <input type="password" id="regPass" class="form-control" placeholder="Введите пароль" required>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Зарегистрироваться</button>
      </form>
    </section>

    <!-- Секция "Вход" -->
    <section id="account">
      <h2 class="section-title animate__animated animate__fadeIn">Вход</h2>
      <form class="form-container" onsubmit="return handleLogin(event)">
        <div class="form-group">
          <label for="loginName">Имя или Email:</label>
          <input type="text" id="loginName" class="form-control" placeholder="Введите имя или email" required>
        </div>
        <div class="form-group">
          <label for="loginPass">Пароль:</label>
          <input type="password" id="loginPass" class="form-control" placeholder="Введите пароль" required>
        </div>
        <button type="submit" class="btn btn-primary mt-2">Войти</button>
      </form>
    </section>

    <!-- Секция "Профиль" -->
    <section id="profile" class="hidden">
      <h2 class="section-title animate__animated animate__fadeIn" id="welcomeText">Добро пожаловать!</h2>
      <div class="card">
        <p><strong>Имя:</strong> <span id="profileUsername"></span></p>
        <p><strong>Email:</strong> <span id="profileEmail"></span></p>
      </div>
    </section>
  </main>

  <!-- Футер -->
  <footer>
    <p>© 2025 ЖерБулагы. Все права защищены.</p>
  </footer>

  <!-- Скрипты -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Инициализация карты
    const map = L.map('geoMap').setView([41.5, 74.5], 6);
    document.getElementById('geoMap').classList.add('loading');
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map).on('load', () => {
      document.getElementById('geoMap').classList.remove('loading');
    });

    // Данные геотермальных источников
    const sources = [
      {
        name: 'Джети-Огуз',
        coords: [42.330556, 78.239722],
        temp: '39–40 °C',
        depth: 'до 200 м',
        activity: 'средняя',
        saving: '30%',
        potential: 'Для отопления домов и теплиц'
      },
      {
        name: 'Джыргалан',
        coords: [42.600000, 79.030000],
        temp: '35–43 °C',
        depth: 'до 200 м',
        activity: 'средняя',
        saving: '25%',
        potential: 'Курортное использование'
      },
      {
        name: 'Ак-Суу (Теплоключенка)',
        coords: [42.461981, 78.539749],
        temp: '58 °C',
        depth: 'до 150 м',
        activity: 'высокая',
        saving: '35%',
        potential: 'Промышленное использование'
      },
      {
        name: 'Барбулак',
        coords: [42.247204, 76.579165],
        temp: '39–42 °C',
        depth: 'до 180 м',
        activity: 'средняя',
        saving: '28%',
        potential: 'Локальное отопление'
      },
      {
        name: 'Чолпон-Ата',
        coords: [42.650000, 77.083000],
        temp: '35–53 °C',
        depth: '200–800 м',
        activity: 'высокая',
        saving: '30%',
        potential: 'Курортное и муниципальное использование'
      },
      {
        name: 'Кош-Кол',
        coords: [42.530000, 76.610000],
        temp: '39–42 °C',
        depth: 'до 200 м',
        activity: 'средняя',
        saving: '25%',
        potential: 'Локальное отопление'
      }
    ];

    // Добавление маркеров на карту
    sources.forEach(src => {
      L.marker(src.coords).addTo(map)
        .bindPopup(`
          <strong>${src.name}</strong><br>
          <b>Температура:</b> ${src.temp}<br>
          <b>Глубина:</b> ${src.depth}<br>
          <b>Активность:</b> ${src.activity}<br>
          <b>Потенциальная экономия:</b> ${src.saving}<br>
          <b>Потенциал:</b> ${src.potential}
        `);
    });

    // Координаты центров регионов
    const regions = {
      'Kyrgyzstan': [41.2044, 74.7661],
      'Issyk-Kul': [42.416668, 77.250000],
      'Ak-Suu': [42.461981, 78.539749],
      'Jeti-Oguz': [42.330556, 78.239722],
      'Jyrgalang': [42.600000, 79.030000],
      'Barbulak': [42.247204, 76.579165],
      'Cholpon-Ata': [42.650000, 77.083000],
      'Kosh-Kol': [42.530000, 76.610000]
    };

    // Обработчик выбора региона
    document.getElementById('regionSelect').addEventListener('change', e => {
      const coords = regions[e.target.value];
      if (coords) {
        map.setView(coords, e.target.value === 'Kyrgyzstan' ? 6 : 10);
      }
    });

    // Калькулятор
    function calculate() {
      const area = parseFloat(document.getElementById("area").value);
      const source = document.getElementById("source").value;
      const region = document.getElementById("region").value;

      if (isNaN(area) || area <= 0) {
        showResult("Пожалуйста, введите корректную площадь дома", false);
        return;
      }

      // Коэффициенты для регионов
      const regionFactors = {
        "Bishkek": 1.1,
        "Issyk-Kul": 0.9,
        "Chuy": 1.05,
        "Naryn": 0.95,
        "Osh": 1.0,
        "General": 1.0
      };

      const factor = regionFactors[region] || 1;

      const data = {
        coal: { cost: 90, co2: 3.5, name: "Уголь" },
        wood: { cost: 70, co2: 2.8, name: "Дрова" },
        electricity: { cost: 100, co2: 1.5, name: "Электричество" },
        gas: { cost: 80, co2: 2.0, name: "Природный газ" }
      };

      const current = data[source];
      const geoCost = Math.round(area * 40 * factor);
      const currentCost = Math.round(area * current.cost);
      const saving = currentCost - geoCost;
      const payback = saving > 0 ? Math.ceil(geoCost / saving) : "∞";
      const co2Reduction = Math.round(area * current.co2 * 0.8);

      showResult(`
        <div class="result-item">
          <span>Текущий источник:</span>
          <span>${current.name}</span>
        </div>
        <div class="result-item">
          <span>Текущие расходы:</span>
          <span>${currentCost} сом/год</span>
        </div>
        <div class="result-item highlight">
          <span>С геотермальной системой:</span>
          <span>${geoCost} сом/год</span>
        </div>
        <div class="result-item highlight">
          <span>Экономия:</span>
          <span>${saving} сом/год (${Math.round(saving/currentCost*100)}%)</span>
        </div>
        <div class="result-item">
          <span>Срок окупаемости:</span>
          <span>${payback} лет</span>
        </div>
        <div class="result-item eco">
          <span>Снижение выбросов CO₂:</span>
          <span>${co2Reduction} кг/год</span>
        </div>
      `, true);
    }

    function showResult(html, isSuccess) {
      const result = document.getElementById("result");
      result.innerHTML = html;
      result.style.backgroundColor = isSuccess ? "rgba(76, 175, 80, 0.1)" : "rgba(255, 193, 7, 0.1)";
      result.classList.remove("hidden");
    }

    // Регистрация и вход
    function handleRegister(event) {
      event.preventDefault();
      const name = document.getElementById("regName").value;
      const pass = document.getElementById("regPass").value;
      const email = document.getElementById("regEmail").value;

      if (pass.length < 6) {
        alert("Пароль должен содержать не менее 6 символов");
        return false;
      }

      localStorage.setItem("username", name);
      localStorage.setItem("password", pass);
      localStorage.setItem("email", email);

      alert("Вы успешно зарегистрировались! Теперь вы можете войти.");
      window.location.href = "#account";
      return false;
    }

    function handleLogin(event) {
      event.preventDefault();
      const name = document.getElementById("loginName").value;
      const pass = document.getElementById("loginPass").value;
      const savedName = localStorage.getItem("username");
      const savedPass = localStorage.getItem("password");
      const savedEmail = localStorage.getItem("email");

      if ((name === savedName || name === savedEmail) && pass === savedPass) {
        document.getElementById("account").classList.add("hidden");
        document.getElementById("profile").classList.remove("hidden");
        document.getElementById("profileLink").classList.remove("hidden");
        document.getElementById("logoutBtn").classList.remove("hidden");

        document.getElementById("welcomeText").textContent = `Добро пожаловать, ${savedName}!`;
        document.getElementById("profileUsername").textContent = savedName;
        document.getElementById("profileEmail").textContent = savedEmail;

        document.querySelectorAll('.nav-link').forEach(link => {
          if (link.getAttribute('href') === '#register' || link.getAttribute('href') === '#account') {
            link.classList.add('hidden');
          }
        });

        window.location.href = "#profile";
      } else {
        alert("Неверное имя пользователя или пароль");
      }
      return false;
    }

    function logout() {
      document.getElementById("profile").classList.add("hidden");
      document.getElementById("profileLink").classList.add("hidden");
      document.getElementById("logoutBtn").classList.add("hidden");

      document.querySelectorAll('.nav-link').forEach(link => {
        if (link.getAttribute('href') === '#register' || link.getAttribute('href') === '#account') {
          link.classList.remove('hidden');
        }
      });

      window.location.href = "#about";
    }

    // Курсы
    function openCourse(courseId) {
      alert(`Курс "${courseId}" будет доступен в ближайшее время!`);
    }

    // Табы
    function openTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(tabId).classList.add('active');
      event.currentTarget.classList.add('active');
    }

    // Контакт с проектом
    function contactProject(projectName) {
      alert(`В полной версии сайта вы сможете связаться с проектом "${projectName}"`);
    }

    // Бургер-меню
    function toggleMenu() {
      document.querySelector('.nav-menu').classList.toggle('active');
    }

    // Плавная прокрутка
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });

    // Анимация при скролле
    function checkScroll() {
      const elements = document.querySelectorAll('.animate-on-scroll');
      elements.forEach(el => {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight - 100) {
          el.classList.add('visible');
        }
      });
    }

    window.addEventListener('scroll', checkScroll);
    checkScroll();

    // Перенаправление по языку (временно закомментировано для тестирования)
    // const userLang = navigator.language || navigator.userLanguage;
    // if (!userLang.startsWith('ru') && !window.location.pathname.includes('index-en.html')) {
    //   window.location.href = "index-en.html";
    // }
  </script>
</body>
</html>